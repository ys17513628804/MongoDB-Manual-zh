# [ ](#)查询与映射运算符

[]()

在本页面

*   [查询选择器](#query-selectors)

*   [映射运算符](#projection-operators)

> **注意**
>
> 有关特定运算符的详细信息，包括语法和示例，请单击特定运算符以转到其参考页。

## <span id="query-selectors">查询选择器</span>

### 比较

有关不同BSON类型值的比较，请参见指定的BSON比较顺序。

| 名称       | 描述                       |
| ---------- | -------------------------- |
| [`$eq`]()  | 匹配等于指定值的值。       |
| [`$gt`]()  | 匹配大于指定值的值。       |
| [`$gte`]() | 匹配大于或等于指定值的值。 |
| [`$in`]()  | 匹配数组中指定的任何值。   |
| [`$lt`]()  | 匹配小于指定值的值。       |
| [`$lte`]() | 匹配小于或等于指定值的值。 |
| [`$ne`]()  | 匹配所有不等于指定值的值。 |
| [`$nin`]() | 不匹配数组中指定的任何值。 |

### 逻辑

| 名称       | 描述                                                         |
| ---------- | ------------------------------------------------------------ |
| [`$and`]() | 使用逻辑`AND`连接查询子句，返回与这两个子句条件匹配的所有文档。 |
| [`$not`]() | 反转查询表达式的效果，并返回与查询表达式*不*匹配的文档。     |
| [`$nor`]() | 用逻辑`NOR`连接查询子句，返回所有不能匹配这两个子句的文档。  |
| [`$or`]()  | 用逻辑`OR`连接查询子句，返回与任一子句条件匹配的所有文档。   |

### 元素

| 名称          | 描述                             |
| ------------- | -------------------------------- |
| [`$exists`]() | 匹配具有指定字段的文档。         |
| [`$type`]()   | 如果字段是指定类型，则选择文档。 |

### 评估

| 名称              | 描述                                           |
| ----------------- | ---------------------------------------------- |
| [`$expr`]()       | 允许在查询语言中使用聚合表达式。               |
| [`$jsonSchema`]() | 根据给定的JSON Schema验证文档。                |
| [`$mod`]()        | 对字段的值执行模运算并选择具有指定结果的文档。 |
| [`$regex`]()      | 选择值与指定的正则表达式匹配的文档。           |
| [`$text`]()       | 执行文本搜索。                                 |
| [`$where`]()      | 匹配满足JavaScript表达式的文档。               |

### 地理空间

| 名称                 | 描述                                                         |
| -------------------- | ------------------------------------------------------------ |
| [`$geoIntersects`]() | 选择与GeoJSON几何形状相交的几何形状。2dsphere索引支持 `$geoIntersects`。 |
| [`$geoWithin`]()     | 选择边界GeoJSON几何内的几何。2dsphere和2D指标支持 `$geoWithin`。 |
| [`$near`]()          | 返回点附近的地理空间对象。需要地理空间索引。2dsphere和2D指标支持 `$near`。 |
| [`$nearSphere`]()    | 返回球体上某个点附近的地理空间对象。需要地理空间索引。2dsphere和2D指标支持 `$nearSphere`。 |

### 数组

| 名称             | 描述                                                         |
| ---------------- | ------------------------------------------------------------ |
| [`$all`]()       | 匹配包含查询中指定的所有元素的数组。                         |
| [`$elemMatch`]() | 如果array字段中的元素符合所有指定`$elemMatch`条件，则选择文档。 |
| [`$size`]()      | 如果数组字段为指定大小，则选择文档。                         |

### 按位

| 名称                | 描述                                                         |
| ------------------- | ------------------------------------------------------------ |
| [`$bitsAllClear`]() | 匹配数字或二进制值，其中一组位的*所有*值均为`0`。            |
| [`$bitsAllSet`]()   | 匹配数字或二进制值，其中一组位的*所有*值均为`1`。            |
| [`$bitsAnyClear`]() | 匹配数值或二进制值，在这些数值或二进制值中，一组位的位置中*任何*位的值为`0`。 |
| [`$bitsAnySet`]()   | 匹配数值或二进制值，在这些数值或二进制值中，一组位的位置中*任何*位的值为`1`。 |

### 注释

| 名称           | 描述                 |
| -------------- | -------------------- |
| [`$comment`]() | 向查询谓词添加注释。 |

## <span id="projection-operators">映射运算符</span>

| 名称             | 描述                                              |
| ---------------- | ------------------------------------------------- |
| [`$`]()          | 数组中匹配查询条件的第一个元素。                  |
| [`$elemMatch`]() | 符合指定$elemMatch条件的数组中的第一个元素。      |
| [`$meta`]()      | 项目在$text操作期间分配的文档分数。               |
| [`$slice`]()     | 限制从数组中投影的元素数量。支持`limit`和`skip`。 |



译者：李冠飞

校对：